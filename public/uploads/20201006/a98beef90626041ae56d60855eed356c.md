# 系统总需求分析

## 用户管理

### 普通用户

1.  建立用户表`HIT_user`，暂设`user_id（主键）`，`user_name`,`user_password`等字段
2.  对用户表进行扩充，如添加性别、年龄、出生日期、身份证号码等信息
3.  添加部门号字段作为外键`user_dep_id`
4.  针对任务消息添加`user_msg`，`user_msg_history`字段

### 管理员用户

1.  建立管理员表`HIT_admin`，设`admin_id`,`admin_password`,`admin_log`
2.  管理员可以对普通用户进行增删改查
3.  管理员可以对所有的文档进行增删改查
4.  管理员可以对部门进行增删改查
5.  管理员可以对角色进行增删改查
6.  管理员可以备份和管理数据库
7.  管理员可以创建新的管理员账户

### 角色

1.  建立角色表`HIT_role`，设`role_name`,`role_user_id`,`role_state`,`role_is_leader`

## 部门管理

1.  建立部门表`HIT_department`，暂设主键`dep_id`，`dep_name`,`dep_place`,`dep_leader`字段

2.  建立部门的树形分级结构如：

    ```
    ----企业平台事业群
    		|----管理部
    		|	    |---财务部
    		|	    `----人力资源部
    		|----测试部
    		|	    |
    		|	    `----自动化测试部
    		`----开发部
    ```

3.  添加表字段以实现分级结构，`dep_level`,`dep_pre`

## 文档管理

### 无流程文档管理

1.  拥有上传权限的普通角色可以进行文档上传，将数据保存到数据库中
2.  文档上传后重命名到指定文件夹，上传后审核未通过的上传到upload_temp文件夹通过的上传到upload文件夹
3.  审核员即管理员可以对上传的文档进行下载，然后对其进行审核
4.  审核通过的文档全部成员都可以read
5.  对不同的角色设置不同的权限如upload-edit-delete为二进制100（上传权限，但没有修改和删除权限）
6.  管理员始终拥有无流程文档的全部权限

### 流程文档管理

1.  建立流程文档表`HIT_word_process`，设立字段`word_name`,`word_place`,`word_state`,

    `word_user_id`，`word_introduction`,`word_startTime`

2.  表中的`word_state`字段表示了能进行的操作，如下表

    |   状态（字段值）   |  操作    |
    | ---- | ---- |
    | 起草(1) | 确定文档号，文档名，文档时间，起草人上传第一版文档 |
    | 修改(2) | 对第一版文档进行修改，最终的结果形成第二版文档 |
    | 提交(3) | 文档所属的部门总管对处于提交态的文档批阅，通过后形成第三版文档 |
    | 审核(4) | 管理员对文档审核，通过后形成第四版文档 |
    | 归档(5)        | 管理员将最终的文档保存到指定的归档位置，形成第五版文档 |
    | 无流程文档(0)  | 数据库中保存无流程文档的文件信息 |


## 权限管理

1.  系统管理员对给用户分配相应的权限，通过对用户表中`user_state`字段进行修改实现
2.  管理员可以创建新的管理员用户

## 角色管理

1.  管理员可以创建新的角色并对角色分配相应权限（增删改查）
2.  对用户可以分配对应的角色

## 任务通知管理

1.  管理员可以给用户进行推送消息